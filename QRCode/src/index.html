<!DOCTYPE html> 
<html manifest="manifest.appcache"> 
  <head> 
    <meta charset="utf-8"> 
    <meta http-equiv="pragma" content="no-cache">
    <title>Camera</title>
    <link type="text/css" rel="stylesheet" href="style/camera.css"/>
    <script type="text/javascript" src="js/camera.js"></script>
    <script type="text/javascript">
        function openBrowser() {
            document.getElementById('imagefile').click();
        }

        function decodeQR() {
    
        }

        function htmlEntities(str) {
            return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        }

        function handleFile(f) {
            alert(document.getElementById("imagefile").value);
            alert(htmlEntities(f[0].fileName));
            //myhtml = "<img src=\"" + htmlEntities(f[0]) + "\" />";
            myhtml = "<img src=\".\/test\/img.png\" />";
            document.getElementById("panel").innerHTML=myhtml;
            
        }
        
    </script>
  </head>
  <body>
    <div id="panel">
    <video id="viewfinder" autoplay> </video>
    </div>
    <div id="controls">
      <a id="switch-button" name="Switch source"></a>
      <a id="capture-button" name="Capture"></a>
      <a id="gallery-button" name="Go to gallery" onClick ="openBrowser()"></a>
    </div>
      <input id = "imagefile" type="file" style='visibility: hidden;' name="img" onChange="handleFile(this.files)" />
  </body>
</html>
